<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>The PFAS Governance Tracker</title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel='stylesheet' id='style-css' href='https://pfasproject.com/wp-content/themes/rowling/style.css?ver=1.1.1-wpcom' type='text/css' media='all'/>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <link href="//code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">
    <script src="//code.jquery.com/jquery-1.12.4.js"></script>
    <script src="//code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
    <link rel='stylesheet' id='social-logos-css' href='https://pfasproject.com/wp-content/plugins/jetpack/_inc/social-logos/social-logos.min.css?ver=12.4-a.7' type='text/css' media='all'/>
    <link rel='stylesheet' id='jetpack_css-css' href='https://pfasproject.com/wp-content/plugins/jetpack/css/jetpack.css?ver=12.4-a.7' type='text/css' media='all'/>
    <script type='text/javascript' src='https://c0.wp.com/c/6.2.2/wp-includes/js/jquery/jquery.min.js' id='jquery-core-js'></script>
    <script type='text/javascript' src='https://c0.wp.com/c/6.2.2/wp-includes/js/jquery/jquery-migrate.min.js' id='jquery-migrate-js'></script>
    <script type='text/javascript' src='https://pfasproject.com/wp-content/plugins/link-widget-title/public/js/link-widget-title-public.js?ver=1.0.1' id='link-widget-title-js'></script>
    <link rel="https://api.w.org/" href="https://pfasproject.com/wp-json/"/>
    <link rel="alternate" type="application/json" href="https://pfasproject.com/wp-json/wp/v2/pages/191"/>
    <link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://pfasproject.com/xmlrpc.php?rsd"/>
    <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://pfasproject.com/wp-includes/wlwmanifest.xml"/>

    <link rel="canonical" href="https://pfasproject.com/additional-resources/"/>
    <link rel='shortlink' href='https://wp.me/P8d0mL-35'/>
    <link rel="alternate" type="application/json+oembed" href="https://pfasproject.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fpfasproject.com%2Fadditional-resources%2F"/>
    <link rel="alternate" type="text/xml+oembed" href="https://pfasproject.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fpfasproject.com%2Fadditional-resources%2F&#038;format=xml"/>

    <script type='text/javascript' src='https://pfasproject.com/wp-content/themes/rowling/js/global.js?ver=20210309' id='global-js'></script>
    <script type='text/javascript' src='https://pfasproject.com/wp-content/plugins/jetpack/_inc/build/twitter-timeline.min.js?ver=4.0.0' id='jetpack-twitter-timeline-js'></script>

    <link rel='stylesheet' id='wpcom-text-widget-styles-css' href='https://pfasproject.com/wp-content/mu-plugins/wpcomsh/vendor/automattic/text-media-widget-styles/css/widget-text.css?ver=20170607' type='text/css' media='all'/>
    <link rel='stylesheet' id='link-widget-title-css' href='https://pfasproject.com/wp-content/plugins/link-widget-title/public/css/link-widget-title-public.css?ver=1.0.1' type='text/css' media='all'/>
    <link rel='stylesheet' id='fontawesome-css' href='https://pfasproject.com/wp-content/themes/rowling/font-awesome/font-awesome.css?ver=20210309' type='text/css' media='all'/>
  

</head>

<body class="home blog wp-custom-logo custom-colors has-site-logo author-hidden">
  <header class="header-wrapper">
      <div class="section-inner">

        <!--PFAS logo and Title-->
        <a href="https://pfasproject.com/" class="site-logo-link" rel="home" itemprop="url" target="_blank">
          <img width="471" height="80" src="https://i0.wp.com/pfasproject.com/wp-content/uploads/2022/02/cropped-SSEHRI-PFAS-Logo-1280.jpg?fit=471%2C80&amp;ssl=1" class="site-logo attachment-rowling_site_logo" alt="" decoding="async" loading="lazy" data-size="rowling_site_logo" itemprop="logo" srcset="https://i0.wp.com/pfasproject.com/wp-content/uploads/2022/02/cropped-SSEHRI-PFAS-Logo-1280.jpg?w=1312&amp;ssl=1 1312w, https://i0.wp.com/pfasproject.com/wp-content/uploads/2022/02/cropped-SSEHRI-PFAS-Logo-1280.jpg?resize=300%2C51&amp;ssl=1 300w, https://i0.wp.com/pfasproject.com/wp-content/uploads/2022/02/cropped-SSEHRI-PFAS-Logo-1280.jpg?resize=1024%2C174&amp;ssl=1 1024w, https://i0.wp.com/pfasproject.com/wp-content/uploads/2022/02/cropped-SSEHRI-PFAS-Logo-1280.jpg?resize=768%2C131&amp;ssl=1 768w, https://i0.wp.com/pfasproject.com/wp-content/uploads/2022/02/cropped-SSEHRI-PFAS-Logo-1280.jpg?resize=816%2C139&amp;ssl=1 816w, https://i0.wp.com/pfasproject.com/wp-content/uploads/2022/02/cropped-SSEHRI-PFAS-Logo-1280.jpg?resize=471%2C80&amp;ssl=1 471w, https://i0.wp.com/pfasproject.com/wp-content/uploads/2022/02/cropped-SSEHRI-PFAS-Logo-1280.jpg?w=1232&amp;ssl=1 1232w" sizes="(max-width: 471px) 100vw, 471px" data-attachment-id="17471" data-permalink="https://pfasproject.com/cropped-ssehri-pfas-logo-1280-jpg/" data-orig-file="https://i0.wp.com/pfasproject.com/wp-content/uploads/2022/02/cropped-SSEHRI-PFAS-Logo-1280.jpg?fit=1312%2C223&amp;ssl=1" data-orig-size="1312,223" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="cropped-SSEHRI-PFAS-Logo-1280.jpg" data-image-description="&lt;p&gt;https://pfasproject.com/wp-content/uploads/2022/02/cropped-SSEHRI-PFAS-Logo-1280.jpg&lt;/p&gt;
            " data-image-caption="" data-medium-file="https://i0.wp.com/pfasproject.com/wp-content/uploads/2022/02/cropped-SSEHRI-PFAS-Logo-1280.jpg?fit=300%2C51&amp;ssl=1" data-large-file="https://i0.wp.com/pfasproject.com/wp-content/uploads/2022/02/cropped-SSEHRI-PFAS-Logo-1280.jpg?fit=616%2C105&amp;ssl=1"/>
        </a>
        <h2 class="site-title">
          <a href="https://pfasproject.com/" title="PFAS Governance Tracker" rel="home" target="_blank">The PFAS Governance Tracker</a>
        </h2>

        <h2 class="site-description">
          A Tool for Finding Governance Actions Related to Per- and Polyfluoroalkyl Substances
        </h2>

        <!--Nav toggle-->
        <div class="nav-toggle">
          <div class="bars">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
          </div>
        </div>
      </div>

    

    <!--Nav bar-->
    <div class="outer">
    <div class="containerNav">
    <nav class="navigation">
      <div class="section-inner clear-fix">
        <ul class="header-bottom-menu">

          <!--Dropdown starts-->               
          <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-has-children menu-item-98">                 
            <a href="#">About</a>
            <ul class="sub-menu">
              <li>
                <a class="nav-link menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-13204" id="menu-item-13204" data-bs-toggle="modal" data-bs-target="#aboutToolModal">About This Tool</a> 
              </li>
              <li>
                <a class=" nav-link menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-192" id="menu-item-192" data-bs-toggle="modal" data-bs-target="#aboutUsModal">About Us</a>
              </li>
              <li>
                <a class="nav-link menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-13204" id="menu-item-13203" data-bs-toggle="modal" data-bs-target="#contactUsModal">Contact Us</a> 
              </li>
            </ul>
          </li>

          <li class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-8">
            <a href="https://pfasproject.com" aria-current="page" target="_blank">Pfas Project Lab</a>
          </li>
        </ul>

      </div>
    </nav>
  </div>
</div>
</header>

<div id="modals">
  <div class="modal fade" id="compBillModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLongTitle">Companion bill
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
            
          </button>
        </div>
        <div class="modal-body" id="companionBill">
        </div>

      </div>
    </div>
  </div>
</div>
    
        <!--start of container-->
        <div class="container-fluid border" id="content">
        <div class="row">

            <div class="d-flex flex-row sticky-top pb-3" style="background-color: rgb(191, 191, 191); z-index: 2;"> 
                        
                <!--search bar -->
              <form class="d-flex col-10 mt-3" role="search" id="basicSearch">
                <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" id="searchTerm">
                <button class="btn btn-secondary" style="color: rgb(255, 255, 255)" type="submit" id="submitBtn">Search</button>
              </form> 
              
              <!--Export Selected Button-->
              <div class="col d-flex mt-3  mx-1">
                <div class="col d-flex align-items-stretch">
                    <div class="row text-right mx-2 d-flex flex-fill ">
                        <button title="Download displayed records as CSV" 
                                type='button' class='btn btn-secondary' 
                                data-toggle='tooltip' 
                                onclick="exportSelected()">
                             <svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='currentColor' class='bi bi-download' viewBox='0 0 16 16'>
                                <path d='M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z'></path>
                                <path d='M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z'></path>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="col d-flex align-items-stretch">
                  <div class="row mx-1 d-flex flex-fill bg-white  rounded" >
                    <p class="text-center m-0 font-weight-bold text-nowrap mt-2" id="numResults"></p>
                  </div>
                </div>
              </div>
            </div>

            <!--dropdown start-->
            <div class="col-3 pt-2" style="background-color: rgb(191, 191, 191);"> 
                <div class="row justify-content-around align-items-center sticky-top-filter">
                    <div class="col">
                        <div class="row mx-1 mb-1">
                            <button id="filterReset" class="btn btn-secondary" type="button">
                              Reset All Filters
                            </button>
                        </div>
                        <div class="col accordion" id="advanced-search">
                           <!--start of accordion item-->
                           <!--State or federal agency-->
                            <div class="accordion-item">
                                <div class="row gx-0 justify-content-center align-items-center">
                                <div class="col-2 d-flex">
                                  <!--Help button State/Fed -->
                                  <button type="button" class="btn btn-link grey-color d-flex" data-bs-toggle="modal" data-bs-target="#stateFedHelpModal" id="stateFedHelp">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-question-circle d-flex" viewBox="0 0 16 16">
                                      <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                                      <path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"/>
                                    </svg>
                                  </button>
                                  </div>
                                  <div class="col-10">
                                <h2 class="accordion-header" id="headingOne">
                                    <!--Accordion buttons start-->
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#advSearch1" aria-expanded="false" aria-controls="advSearch1">
                                    State or Federal Agency
                                    </button>
                                  </h2>
                                  </div>
                                  </div>
                                    <div id="advSearch1" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="advanced-search">
                                        <div class="accordion-body">
                                            <form class="form-check">
                                                <label class="form-check-label" for="stateSelect">
                                                    State
                                                </label>
                                                <!-- <input class="form-check-input" type="checkbox" value="" id="state"> -->
                                                <select data-width="fit" multiple id="stateSelect" data-selected-text-format="count" data-actions-box="true">
                                                    <!--state options-->
                                                </select>
                                            </form>
                                            <form class="form-check">
                                                <label class="form-check-label" for="fedSelect">
                                                    Federal
                                                </label>
                                                <!-- <input class="form-check-input" type="checkbox" value="" id="federal"> -->
                                                <select data-width="fit" multiple id="fedSelect" data-selected-text-format="count" data-actions-box="true">
                                                    <!--federal options-->
                                                </select>
                                            </form>
                                        </div>
                                    </div>
                            </div>
                            
                            <!--end of accordion item-->

                            <!--start of accordion item-->
                            <!--Date-->
                            <div class="accordion-item">
                                <div class="row gx-0 justify-content-center align-items-center">
                                <div class="col-2 d-flex">
                                   <!--Help button Date-->
                                  <button type="button" class="btn btn-link grey-color d-flex" data-bs-toggle="modal" data-bs-target="#dateHelpModal">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-question-circle" viewBox="0 0 16 16">
                                      <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                                      <path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"/>
                                    </svg>
                                  </button>
                                </div>
                                <div class="col-10">
                                <h2 class="accordion-header" id="headingTwo">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#advOption2" aria-expanded="false" aria-controls="advOption2">
                                    Date
                                    </button>
                                </h2>
                                </div>
                                </div>
                                    <div id="advOption2" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="advanced-search">
                                        <div class="accordion-body justify-content-center">
                                            <form>
                                                <input type="number" min="1900" max="2099" step="1" value="" id="dateStart"/>
                                                -
                                                <input type="number" min="1900" max="2099" step="1" value="" id="dateEnd"/>
                                            </form>
                                        </div>
                                    </div>
                            </div>
                            <!--end of accordion item-->

                            <!--start of accordion item-->
                            <!--Type of action-->
                            <div class="accordion-item">
                              <div class="row gx-0 justify-content-center align-items-center">
                              <div class="col-2 d-flex">
                              <!--Help button Type of Action-->
                              <button type="button" class="btn btn-link grey-color" data-bs-toggle="modal" data-bs-target="#actionTypeHelpModal">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-question-circle" viewBox="0 0 16 16">
                                  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                                  <path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"/>
                                </svg>
                              </button>
                              </div>
                              <div class="col-10">
                                <h2 class="accordion-header" id="headingThree">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#advOption3" aria-expanded="false" aria-controls="advOption3">
                                    Type of Action
                                    </button>
                                  </h2>
                                </div>
                                </div>
                                    <div id="advOption3" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="advanced-search">
                                        <div class="accordion-body" id="actionTypeBody">
                                            <!--action types injected here-->
                                            <select data-width="fit" multiple id="typeSelect" data-selected-text-format="count" data-actions-box="true">
                                              <!--type options-->
                                            </select>
                                        </div>
                                    </div>
                            </div>
                            <!--end of accordion item-->

                            <!--start of accordion item-->
                            <!--Topic of action-->
                            <div class="accordion-item">
                              <div class="row gx-0 justify-content-center align-items-center">
                              <div class="col-2 d-flex">
                                <!--Help button Topic of Action-->
                              <button type="button" class="btn btn-link grey-color align-items-center" data-bs-toggle="modal" data-bs-target="#actionTopicHelpModal">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-question-circle" viewBox="0 0 16 16">
                                  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                                  <path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"/>
                                </svg>
                              </button>
                              </div>
                              <div class="col-10">
                                <h2 class="accordion-header" id="headingFour">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#advOption4" aria-expanded="false" aria-controls="advOption4">
                                    Topic of Action
                                    </button>
                                </h2>
                              </div>
                              </div>
                                    <div id="advOption4" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="advanced-search">
                                          <div class="accordion-body" id="actionTopicBody">
                                              <!--action topics injected here-->
                                              <select data-width="fit" multiple id="topicSelect" data-selected-text-format="count" data-actions-box="true">
                                                <!--topic options-->
                                            </select>
                                          </div>
                                  </div>
                            </div>
                            <!--end of accordion item-->
                            <!--start of accordion item-->
                            <!--Topic of action-->
                            <div class="accordion-item">
                              <div class="row gx-0 justify-content-center align-items-center">
                              <div class="col-2 d-flex">
                                <!--Help button Topic of Action-->
                              <button type="button" class="btn btn-link grey-color align-items-center" data-bs-toggle="modal" data-bs-target="#outcomeHelpModal">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-question-circle" viewBox="0 0 16 16">
                                  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                                  <path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"/>
                                </svg>
                              </button>
                              </div>
                              <div class="col-10">
                                <h2 class="accordion-header" id="headingFive">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#advOption5" aria-expanded="false" aria-controls="advOption5">
                                    Legistlative Outcome
                                    </button>
                                </h2>
                              </div>
                              </div>
                                    <div id="advOption5" class="accordion-collapse collapse" aria-labelledby="headingFive" data-bs-parent="advanced-search">
                                          <div class="accordion-body" id="outcomeBody">
                                              <!--outcomes injected here-->
                                              <select data-width="fit" multiple id="outcomeSelect" data-selected-text-format="count" data-actions-box="true">
                                            </select>
                                          </div>
                                  </div>
                            </div>
                            <!--end of accordion item-->
                            <!--start of accordion item-->
                            <!--sort by options-->
                            <div class="accordion-item">
                            <div class="row gx-0 justify-content-center align-items-center">
                              <div class="col-2 d-flex">
                                  <!--Help button Sort By-->
                                  <button type="button" class="btn btn-link grey-color" data-bs-toggle="modal" data-bs-target="#sortHelpModal">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-question-circle" viewBox="0 0 16 16">
                                      <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                                      <path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"/>
                                    </svg>
                                  </button>
                              </div>
                                <div class="col-10">
                                <h2 class="accordion-header" id="headingSix">
                                    
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#option6" aria-expanded="false" aria-controls="option6">
                                    Sort
                                    </button>
                                    
                                </h2>
                                </div>
                                    <div id="option6" class="accordion-collapse collapse" aria-labelledby="headingSix" data-bs-parent="advanced-search">
                                        <div class="accordion-body" id="sort-by">
                                            <div class="row">
                                                <span id="clearSort" class="btn btn-secondary">Clear Sort</span>
                                            </div>
                                            <div class="row mt-3">
                                                <span id="sortDate" class="sort btn btn-secondary" data-sort="Date">Sort by: Date</span>
                                            </div>
                                        </div>
                                    </div>
                            </div>
                            </div>
                            
                        </div>
                    </div>
                </div>
            </div>
            <!--dropdown end-->
            
            <!--cards start-->
            <div class="col-9" style="background-color: rgb(191, 191, 191) ;"> 
              <!--Spinner start-->
              <div class="d-flex justify-content-center">
                <div class="spinner-border" id="spinner" role="status" style="width: 4rem; height: 4rem;">
                  <span class="sr-only"></span>
                </div>
              </div>
              <div class="row">
                  <div class="col-lg-12 gy-2 overflow-auto" id="search_results">
                      <div class="list row gy-3 align-items-center">
                          <!--cards injected here-->
                      </div>
                  </div>
              </div>
            <!--search bar and cards end-->
            </div> 
        <!--end of container--> 

        <!--Site footer-->
        <footer class="site-footer d-none" id="siteFooter">

          <div class="section-inner">
              <a href="#" class="to-the-top" title="To the top">
                  <div class="fa fw fa-arrow-up"></div>
              </a>

              <p class="attribution" style="color: white; font-size: 16px">&copy; 
                <span id="citation"></span>
              </p>
          </div>
  
      </footer>
      <!--End of footer-->


      <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js" integrity="sha384-fbbOQedDUMZZ5KreZpsbe1LCZPVmfTnH7ois6mU1QK+m14rQ1l2bGBq41eYeM/fS" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/list.js/2.3.1/list.min.js" crossorigin="anonymous" type="text/javascript"></script>
      <script>
        
      var accordionID = 0;
      var earliestDate = 2023;
      var latestDate = 2023;
      const modalNames = ['about', 'actionTopicHelp', ];
      function modalTemplate(fileName,title,body){
        
        return `
        <div class="modal fade" id="${fileName}Modal" tabindex="-1" role="dialog" aria-labelledby="${fileName}Title" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="${fileName}Title">
                  ${title}
                </h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                  </button>
              </div>
              <div class="modal-body" id="${fileName}Body">
                ${body}
              </div>
          </div>
        </div>
      </div>
        `
      };
      function cardTemplate(values, modal = false){
          return `
                <div class='card ${(modal ? "border-0":"")}'>  
                  <div class='card-body'> 
                      <h2 class='card-title ml-3'>  
                      ${values.Title}
              <!--***Name of Governance Action/title goes here***--> 
                          <!--download button--> 
                          <button title="Download record as TXT" 
                                  type='button' class='btn btn-secondary' 
                                  data-toggle='tooltip' 
                                  onclick='exportThisRecord(${values.ID})'>
                            <svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='currentColor' class='bi bi-download' viewBox='0 0 16 16'> 
                              <path d='M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z'></path> 
                             <path d='M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z'></path> 
                            </svg> 
                          </button> 
                      </h2> 
                      <!--Actor, Date, Legislation, Topics of Action, and Key Agencies/Players--> 
                      <h5 class='card-actor ml-3'><strong>Federal Agency or State</strong>:  
              ${values.AgencyOrState} 
              <!--***Name of Federal Agency/State goes here***--></h5> 
                      <h5 class='card-date ml-3'><strong>Date</strong>:  
              ${values.Date}
              <!--***Date of governance goes here***--></h5> 
                      <h5 class='card-type ml-3'><strong>Type of Governance Action</strong>:  
              ${values.ActionType} 
              <!--***Type of governance action goes here***--></h5> 
                      <h5 class='card-topicsOfAction ml-3'><strong>Topics of Governance Action</strong>:  
              ${values.ActionTopic}
              <!--***Topics of action goes here***--></h5> 
                      <h5 class='card-keyAgencyPlayers ml-3'><strong>Key Agencies and Players</strong>:  
              ${values.AgenciesAndPlayers} 
              <!--***Key agencies/players goes here***--></h5> 
                        <!--Accordion${(values.ID.toString()) + (modal ? "modal":"")}Info Start--> 
                        <div class='container mt-4'> 
                          <div id='accordion${(values.ID.toString()) + (modal ? "modal":"")}'> 
                          <!--Summary of Action--> 
                            <div class='card'> 
                              <a class='card-link card-header' data-toggle='collapse' href='#collapseOne${(values.ID.toString()) + (modal ? "modal":"")}' > 
                                Summary of Action 
                              </a> 
                              <div id='collapseOne${(values.ID.toString()) + (modal ? "modal":"")}' class='collapse' data-parent='#accordion${(values.ID.toString()) + (modal ? "modal":"")}'> 
                                <div class='card-body'> 
                                  ${values.Summary}
                              </div> 
                            </div> 
                            <!--Legislative outcome--> 
                            <div class='card'> 
                              <a class='card-link card-header' data-toggle='collapse' href='#collapseTwo${(values.ID.toString()) + (modal ? "modal":"")}' > 
                                Legislative Outcome 
                              </a> 
                              <div id='collapseTwo${(values.ID.toString()) + (modal ? "modal":"")}' class='collapse' data-parent='#accordion${(values.ID.toString()) + (modal ? "modal":"")}'> 
                                <div class='card-body'>   
                                  ${values.LegislativeOutcome}
                              </div> 
                            </div> 
                            <!--Companion Bill--> 
                            <div class='card'> 
                              <a class='card-link card-header' data-toggle='collapse' href='#collapseThree${(values.ID.toString()) + (modal ? "modal":"")}' > 
                                Companion Bill 
                              </a> 
                              <div id='collapseThree${(values.ID.toString()) + (modal ? "modal":"")}' class='collapse' data-parent='#accordion${(values.ID.toString()) + (modal ? "modal":"")}'> 
                                <div class='card-body'>
                                  ${(values.CompanionBill == 'N/A') || (values.CompanionBill == 'No companion legislation') ? 'N/A':`<p><a class='compBill' href='#compBillModal' data-bs-toggle='modal'>${values.CompanionBill}</a></p>`}
                              </div>
                            </div> 
                            <!--PFAS Definition--> 
                            <div class='card'> 
                              <a class='collapsed card-link card-header' data-toggle='collapse' href='#collapseFour${(values.ID.toString()) + (modal ? "modal":"")}'> 
                                PFAS Definition 
                              </a> 
                              <div id='collapseFour${(values.ID.toString()) + (modal ? "modal":"")}' class='collapse' data-parent='#accordion${(values.ID.toString()) + (modal ? "modal":"")}'> 
                                <div class='card-body'>
                                  ${values.PFASDefinition}
                                  <!--***PFAS definition goes here***--> 
                                </div> 
                              </div> 
                            </div> 
                            <!--Sources--> 
                            <div class='card'> 
                              <a class='card-link card-header' data-toggle='collapse' href='#collapseFive${(values.ID.toString()) + (modal ? "modal":"")}'> 
                                Sources 
                              </a> 
                              <div id='collapseFive${(values.ID.toString()) + (modal ? "modal":"")}' class='collapse' data-parent='#accordion${(values.ID.toString()) + (modal ? "modal":"")}'> 
                                <div class='card-body'> 
                                  <h6><p>Primary Source:</p></h6> 
                                  <p><ul>${(values.PrimarySources == 'N/A' || values.PrimarySources == undefined) ? 'N/A': values.PrimarySources.split(', ').map((link)=>{return`<li><a href=${link} class='link-underline-Primary' target='_blank'>${link}</a></li> <br />`})}</ul></p> 
                                  <h6><p>Other Important Sources:</p></h6> 
                                  <p><ul>${(values.SecondarySources == 'N/A' || values.SecondarySources == undefined) ? 'N/A': values.SecondarySources.split(', ').map((link)=>{return`<li> <a href=${link} class='link-underline-Primary' target='_blank'>${link}</a></li> <br />`}).join('\n')}</ul></p> 
                              </div> 
                          </div> 
                      </div> 
                  </div> 
              </div> 
              </div> 
              </div> 
              </div> 
              </div> 
              </div> 
              </div> 
              </div> 
      `;
      };
      var options = { // list.js options, fill with html cardTemplate and column names
          valueNames: [
          "Title", 
          "AgencyOrState", 
          "Date", 
          "ActionType", 
          "ActionTopic", 
          "AgenciesAndPlayers", 
          "Summary", 
          "LegislativeOutcome", 
          "CompanionBill", 
          "PFASDefinition", 
          "PrimarySources",
          "SecondarySources",
          "ID"
      ],
          item:
              function (values){
                return cardTemplate(values);
              }
      };
      var values = []; // list.js values (should stay empty)
      var dataList = new List("content", options, values); // list.js object
      var metadata = {};
      const submitBtn = document.getElementById("submitBtn");      
      const stateSel = document.getElementById("state");
      const fedSel = document.getElementById("federal");
      var stateSelVal = $('#stateSelect').val(); // default vaules for search
      var fedSelVal = $('#fedSelect').val();
      var dateStart = $('#dateStart').val();
      var dateEnd = $('#dateEnd').val();
      var actionTypeVal = [];
      var actionTopicVal = [];
      var actionOutcomeVal = [];

      /*
      start of event listeners
      */
      $('#dateStart, #dateEnd').on('change', function(){
        dateEnd = $('#dateEnd').val();
        console.log(dateEnd);
        dateStart = $('#dateStart').val();
        console.log(dateStart);
      })
      $('#stateSelect').on('change',function() {
          stateSelVal = $(this).val();
          console.log(stateSelVal);
      });
      $('#fedSelect').on('change',function() {
          fedSelVal = $(this).val();
          console.log(fedSelVal);
      });
      $('#typeSelect').on('change',function() {
          actionTypeVal = $(this).val();
          console.log(actionTypeVal);
      });
      $('#topicSelect').on('change',function() {
          actionTopicVal = $(this).val();
          console.log(actionTopicVal);
      });
      $('#outcomeSelect').on('change',function() {
          actionOutcomeVal = $(this).val();
          console.log(actionOutcomeVal);
      });
      
      $('#filterReset').on('click', function(){
        resetFilters();
      });

      $('#basicSearch').on("submit", function(e) { 
        e.preventDefault();
        dataList.search($('#searchTerm').val(),['Title','Summary','AgenciesAndPlayers']);     
        megaFilter();
      });

      $('#stateSelect, #fedSelect, #dateStart, #dateEnd, #typeSelect, #topicSelect, #outcomeSelect').on('change', function(e){
        e.preventDefault();
        megaFilter();
      });

      $('#clearSort').on('click', function(){
        $('#sortDate').attr('class', 'sort btn btn-secondary');
        dataList.sort('ID', { order: "asc" });
      });

      $(document).ready(function(){ // companion bill event listener
        $(document).on('click', '.compBill', function(){
          var compBill = $(this).text();
          compBillVals = dataList.get('Title',compBill)[0].values();
          $('#companionBill').empty();
          $('#companionBill').html(
          cardTemplate(compBillVals, true)
          );
          });
        });

      function megaFilter(){

        var filterTopic = true;
        var filterType = true;
        var filterState = true;
        var filterFederal = true;
        var filterDate = true;
        var filterOutcome = true;

        dataList.filter((item)=>{

          if(item == undefined){
            return false;
          }

          if (stateSelVal != ""){
          console.log("searching with state filter");
          filterState = stateSelVal.includes(item.values().AgencyOrState);
          }

          if (fedSelVal != ""){
            console.log("searching with federal filter");
            filterFederal = fedSelVal.includes(item.values().AgencyOrState);     
          }

          if (actionTypeVal != ""){
            console.log("searching with type filter");
            filterType = actionTypeVal.some((type) => { return ((item.values().ActionType).includes((type)))  });
          }

          if (actionTopicVal != ""){
            console.log("searching with topic filter = "+actionTopicVal);
            filterTopic = actionTopicVal.some((topic) => { return ((item.values().ActionTopic).includes((topic)))  });
          }

          if (actionOutcomeVal != ""){
            console.log("searching with outcome filter");
            filterOutcome = actionOutcomeVal.some((outcome) => { return ((item.values().LegislativeOutcome).includes((outcome)))  });
          }

          if ((dateStart != "") || (dateEnd != "")){
            console.log("searching with " + (dateStart) + " and " + (dateEnd));
            filterDate = ((item.values().Date <= dateEnd) && (item.values().Date >= dateStart));
          }

          return filterTopic && filterType && filterState && filterFederal && filterDate && filterOutcome;
        });
        updateResultCount();
        // console.log("filtered");
      };

      async function onSubmit(e) {
          e.preventDefault();
          //getInfo();
      }
      
      function resetFilters(){
        dataList.filter();
        $('#dateStart').val(earliestDate);
        $('#dateEnd').val(latestDate);
        $('select').selectpicker('deselectAll');
        stateSelVal = "";
        fedSelVal = "";
        actionTypeVal = "";
        actionTopicVal = "";
        actionOutcomeVal = "";
        dateStart = earliestDate;
        dateEnd = latestDate;
        updateResultCount();
      }
      function updateResultCount() {
        $('#numResults').text(`${(dataList.filtered || dataList.searched ? dataList.matchingItems.length:dataList.items.length)} Results`);
      }

      function exportThisRecord(ID) {
        // Get item from dataList that has the given ID
        const record = dataList.get("ID", ID)[0];

        if (!record) {
          console.log("No record found with ID: " + ID);
          return;
        }

        // Make a string where each line looks like "Header: Content" with a blank line after each record
        let recordString = '';
        recordString += 'Search results from: ';
        recordString += metadata.Citation + '\n\n';
        for (const key in record.values()) {
          // Skip ID field and undefined values
          if (key !== 'ID' && record.values()[key]) {
            recordString += `${key}: ${record.values()[key]}\n\n`;
          }
        }
        // Save this string in a .txt file named after the first two words of the title
        const shortTitle = record.values().Title.split(' ').slice(0,15);
        const filename = `${shortTitle.join(' ').replace(/[/\\?%*:|"<>]/g, '-')}.txt`;

        const bb = new Blob([recordString], { type: 'text/plain' });
        const a = document.createElement('a');
        a.href = window.URL.createObjectURL(bb);
        a.download = filename;
        a.click();

        console.log("Export record: " + ID);
      } 

      function exportSelected() {
        // Remove ID from list of fields
        const fields = options.valueNames.filter(field => field !== 'ID');
        const selected = dataList.matchingItems;
        let fileContent = '';

        // Add metadata to fileContent


        // Add header row to fileContent
        const headerRow = fields.map(field => `"${field}"`).join(',');
        fileContent += headerRow + '\n';

        // Add selected records to fileContent
        for (i=0; i < selected.length; i++) {
          let record = selected[i].values();
          // Replace "smart quotes" with regular quotes
          let row = fields.map(field => `"${String(record[field]).replaceAll('“','"').replaceAll('”','"').replaceAll('"',"'")}"`);
          fileContent += row.join(',').replaceAll('\n',' ') + '\n';
        }

        // Save fileContent as a new CSV file
        const bb = new Blob([fileContent], { type: 'text/csv' });
        const a = document.createElement('a');

        // Add date and time to the filename
        const now = new Date();
        const formatter = new Intl.DateTimeFormat('en-US', {
          year: 'numeric',
          month: '2-digit',
          day: '2-digit',
          hour: 'numeric',
          minute: 'numeric',
          second: 'numeric',
          hour12: false,
        });
        const date = formatter.format(now).replaceAll('/', '').replaceAll(':', '').replaceAll(', ','-').split('-')[0];
        a.download = `pfas-governance-export-${date}.csv`;
        a.href = window.URL.createObjectURL(bb);
        a.click();
      }

      async function createModals(files){
        for (i in files){
          var name = (files[i].split('.')[0]);
          const res = await fetch(`/static/${files[i]}`, { method: "GET" });
          const text = await res.text();
          title = text.split('<title>')[1].split('</title>')[0];
          body = text.split('<body>')[1].split('</body>')[0];
          $('#modals').append(modalTemplate(name,title,body));
        }
      };

      async function getInfo() {
          let spinner = document.getElementById("spinner");
          const res = await fetch('/info', { method: "GET" });
          const info = await res.json();
          console.log(info);
          metadata = info.metadata;

          function makeOptions(items, selectID) {
            items.map((item) =>{
              $(`#${selectID}`).append(
                  "<option>" + item + "</option>"
              )
            });
          }
          makeOptions(info.states, 'stateSelect');
          makeOptions(info.agencies, 'fedSelect');
          makeOptions(info.types, 'typeSelect');
          makeOptions(info.topics, 'topicSelect');
          makeOptions(info.outcomes, 'outcomeSelect');
          createModals(info.helpFiles).then(() => {
            const splashScreen = new bootstrap.Modal('#aboutToolModal');
            splashScreen.show()
          });
          
          info.data.map((item)=>{

              var date = (item[5]);

              if (date < earliestDate)  earliestDate = date;
              if (date > latestDate)    latestDate = date;

              item = item.map(str => str.trim());
              dataList.add({
                  Title: item[2], 
                  AgencyOrState: item[0], 
                  Date: item[5], 
                  ActionType: item[3], 
                  ActionTopic: item[4], 
                  AgenciesAndPlayers: item[10], 
                  Summary: item[9], 
                  LegislativeOutcome: item[7], 
                  CompanionBill: item[8], 
                  PFASDefinition: item[11], 
                  PrimarySources: item[12],
                  SecondarySources: item[13],
                  ID: accordionID++
              });
          });
          $('#dateStart').val(earliestDate);
          $('#dateEnd').val(latestDate);
          $('select').selectpicker(); // Apply bootstrap-select to all select tags
          $('[data-toggle="tooltip"]').tooltip() // Activate tooltips
          $("#spinner").attr('hidden', true);
          $("#siteFooter").removeClass('d-none');
          $("#citation").text(info.metadata["Citation"]);

          const mdy = info.metadata["Release date"].split('/');
          const year = mdy[2];
          if (year > 2023) {
            $("#additional-copyright").text(`- ${year}`);
          }
          
          updateResultCount();
        }
        
      getInfo();
      </script>
  </body>
</html>
