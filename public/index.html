<!DOCTYPE html>
    <!--This comment should only show up on Oliver branch-->
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="">
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    </head>
    <body>
        <form>
            <button id='submit' type='submit'>get info</button>
            <form>
                <lanel for="target">target</lanel>
                <input type="text" id="target" name="target" placeholder="target">
                <div class="container vertical-scrollable" style=" max-width: 100%;max-height: 50%; background-color: aquamarine; overflow-y: scroll;" >
                    <div class="row g-5 justify-content-evenly" style="width: 100%;">
                      <div class="col-lg" style="width: 100%; " id="cards">
                        <!--HTML cards injected here-->
                        <p></p>
                      </div>
                    </div>
                </div>
                <div>
            
                </div>
            </form>
        <script>
            
            const name = document.getElementById('name');
            const email = document.getElementById('email');
            const ID = document.getElementById('id');
            const submitBtn = document.getElementById('submit');
            const baseURL = 'http://localhost:9001/info';
            var target = "";
 
           $("#target").on('change', function() {
                target = $(this).val();
            }
            );
            $("#submit").on('click', getInfo);

            async function getInfo(e) {
                e.preventDefault();
                const searchParams = new URLSearchParams();
                searchParams.append('param1', target);
                const url = `${baseURL}?${searchParams.toString()}`;

                const res = await fetch(url, { method: 'GET' });

                const data = await res.json();
                //console.log(data);

                $("#cards").empty();

                //console.log(data.data);

                data.data.map((item) => {
                    $("#cards").append(
                    "<div class='card' style='width: 100%; '>"+
                    "<div class='card-body'>"+
                        "<h1 class='card-title'>"+item[0]+"</h1>"+
                        "<h5 class='card-subtitle mb-2 text-muted'>"+item[1]+"</h5>"+
                        "<p class='card-tex mb-2'>"+item[2]+"</p>"+
                        "<p class='card-text mb-2'>"+item[3]+"</p>"+
                        "</div>"+
                        "</div>"+
                    "</div>"
                    ); // html injection can be handled here for each search result
                });
            }

        </script>
    </body>
</html>